# disable content negotiation and directory listings
Options -MultiViews -Indexes

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # If the request already maps to an existing file, serve it as-is
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^ - [L]

  # If /path corresponds to /path.html (e.g. /about -> /about.html), serve it
  RewriteCond %{REQUEST_FILENAME}.html -f
  RewriteRule ^(.*?)/?$ $1.html [L,QSA]

  # If /path (with or without trailing slash) corresponds to a directory with index.html, serve that index (internal rewrite)
  RewriteCond %{REQUEST_FILENAME}/index.html -f
  RewriteRule ^(.*?)/?$ $1/index.html [L,QSA]

  # leave 404 handling to your existing 404.html
  ErrorDocument 404 /404.html
</IfModule>
